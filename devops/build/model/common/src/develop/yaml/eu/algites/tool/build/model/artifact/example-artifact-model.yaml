# Minimal example of Algites artifact model YAML (draft)
# ----------------------------------------------------
# Notes:
# - 'id' is a local unique key used for cross-references inside this YAML.
# - 'kind' uses enum values from eu.algites.tool.build.model.artifact.common.AInArtifactKind
# - For controlled artifacts, you can specify 'versionContext'. For uncontrolled, use 'version'.
# - Scope level uses enum values from eu.algites.tool.build.model.artifact.common.AInArtifactDependencyScopeLevel

artifacts:
  - id: pol.root
    kind: POLICY
    groupId: eu.algites
    artifactIdBase: pub.policy.root
    policyDefinitionUid: polRoot
    policyDefinitionVersion: "1.0"
    versionContext:
      releaseLine: "1"
      revision: 0
      qualifierKind: SNAPSHOT
      qualifierLabel: SNAPSHOT
    managedPolicyBackgroundDependencies:
      - target: ext.slf4j
        scope:
          level: IMPORT
          locked: true
          transitive: true

  - id: pbom.root
    kind: POLICY_BACKGROUND_BOM
    groupId: eu.algites
    artifactIdBase: pub.policy.root-pbom
    parent: pol.root
    versionContext:
      releaseLine: "1"
      revision: 0
      qualifierKind: SNAPSHOT
      qualifierLabel: SNAPSHOT
    managedPolicyBackgroundDependencies:
      - target: ext.slf4j
        scope:
          level: IMPORT
          locked: true
          transitive: true

  - id: pibom.api
    kind: PRODUCT_INTERFACE_BOM
    groupId: eu.algites
    artifactIdBase: pub.product.api-pibom
    parent: pol.root
    policyBackgroundBom: pbom.root
    versionContext:
      releaseLine: "1"
      revision: 0
      qualifierKind: SNAPSHOT
      qualifierLabel: SNAPSHOT
    managedInterfaceDependencies:
      - target: ctrl.jackson
        scope:
          level: IMPORT
          locked: false
          transitive: true

  - id: pvbom.demo
    kind: PRODUCT_VARIANT_BOM
    groupId: eu.algites
    artifactIdBase: pub.product.demo-pvbom
    parent: pol.root
    productInterfaceBom: pibom.api
    versionContext:
      releaseLine: "1"
      revision: 0
      qualifierKind: SNAPSHOT
      qualifierLabel: SNAPSHOT
    managedProductVariantDependencies:
      - target: ext.junit
        scope:
          level: IMPORT
          locked: false
          transitive: true

  - id: ctrl.jackson
    kind: PRODUCT_CORE
    groupId: com.fasterxml.jackson.core
    artifactIdBase: jackson-databind
    parent: pol.root
    versionContext:
      releaseLine: "1"
      revision: 0
      qualifierKind: SNAPSHOT
      qualifierLabel: SNAPSHOT
    directDependencies:
      - target: ext.slf4j
        scope:
          level: COMPILE
          locked: false
          transitive: true
        exclusions:
          - target: ext.junit
            type: jar

  - id: ext.slf4j
    kind: UNCONTROLLED_CORE
    groupId: org.slf4j
    artifactIdBase: slf4j-api
    version: "2.0.16"

  - id: ext.junit
    kind: UNCONTROLLED_CORE
    groupId: org.junit.jupiter
    artifactIdBase: junit-jupiter-api
    version: "5.11.0"
